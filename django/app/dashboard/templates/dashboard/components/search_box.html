<div class="card w-100">
				<script>
				/* Function to construct URL */
				$(function(){
								$(".search-link").click(function(){
												if ($(this).attr("mode")){
																var url  = "{% url 'dashboard:index' %}"+ $(this).attr("mode") +"/?";
												}else{
																var url  = "{% url 'dashboard:index' %}?";
												}
												var items = ["keywords", "book_style", "sort", "period_method",  "period_year",];
												for( const key of items ){
																key_id = "#search-" + key;
																if  ($(key_id).val() != ""){
																				url += "&" + key + "=" + encodeURI($(key_id).val());
																}
												}
												if ($(this).attr("page")){
																url += "&page="+  encodeURI($(this).attr("page")); 
												}
												$(this).attr("href",url);
								});
				});
				$(function(){
								$("#search-period_method").change(function(){
												console.log($(this).val());
												if ($(this).val() == "all"){
																$("#search-period_year").prop("disabled", true);
												}else{
																$("#search-period_year").prop("disabled", false);
												}											
								});
				});
				</script>				
				<div class="card-header">
								Search Box
				</div>
				<div>
								<div class="card-body">
												<form action="" method="get">
																<div class="row mb-3">
																				<div class="col-12">
																								<div class="input-group mb-3">
																												<div class="input-group-prepend">
																																<span class="input-group-text">Search</span>
																												</div>
																												<input type="text" aria-label="Search Keyword" class="form-control" id="search-keywords"
																																value="{% if GET_params.keywords %}{{GET_params.keywords}}{% endif %}"  placeholder="Keywords....">
																												<div class="input-group-append">
																																<a href="#" class="btn btn-primary search-link" id="search-button">Go!</a>
																												</div>
																								</div>
																				</div>
																				<div class="col-md-4">
																								<div class="input-group mb-3">
																												<div class="input-group-prepend">
																																<label class="input-group-text" for="inputGroupSelect01">Book Type</label>
																												</div>
																												<select class="custom-select" id="search-book_style" name="book_style">
																																<option value="ALL" {% if GET_params.book_style == "ALL" or not GET_params.period_method %}selected{% endif %}>All</option>
																																<option value="INTPROC" {% if GET_params.book_style == "INTPROC" %}selected{% endif %}>Proceedings</option>
																																<option value="JOURNAL" {% if GET_params.book_style == "JOURNAL" %}selected{% endif %}>Jounals</option>
																																<option value="CONF_DOMESTIC" {% if GET_params.book_style == "CONF_DOMESTIC" %}selected{% endif %}>国内会議</option>
																																<option value="CONF_DOMESTIC_NO_REVIEW" {% if GET_params.book_style == "CONF_DOMESTIC_NO_REVIEW" %}selected{% endif %}>国内研究会</option>
																																<option value="CONF_NATIONAL" {% if GET_params.book_style == "CONF_NATIONAL" %}selected{% endif %}>全国大会</option>
																																<option value="BOOK" {% if GET_params.book_style == "BOOK" %}selected{% endif %}>Book/Review/Editor</option>
																																<option value="KEYNOTE" {% if GET_params.book_style == "KEYNOTE" %}selected{% endif %}>Presentaion/Seminer</option>
																																<option value="NEWS" {% if GET_params.book_style == "NEWS" %}selected{% endif %}>New Paper article</option>
																																<option value="OTHERS" {% if GET_params.book_style == "OTHERS" %}selected{% endif %}>others</option>
																																<option value="AWARD" {% if GET_params.book_style == "AWARD" %}selected{% endif %}>Award</option>
																																
																												</select>	
																								</div>
																				</div>
																				<div class="col-md-4">
																								<div class="input-group mb-3">																											
																												<div class="input-group-prepend">
																																<label class="input-group-text" for="inputGroupSelect01">Sort</label>
																												</div>
																												<select class="custom-select" id="search-sort" name="search-sort">
																																<option value="ascending" {% if GET_params.order == "ascending" or not GET_params.period_method %}selected{% endif %}>Date - Ascending</option>
																																<option value="desending" {% if GET_params.order == "desending" %}selected{% endif %}>Date - Desending</option>																															
																												</select>																			
																								</div>
																				</div>
																				<div class="col-md-4">
																								<div class="input-group mb-3">
																												<div class="input-group-prepend">
																																<label class="input-group-text" for="inputGroupSelect01">Date</label>
																												</div>																												

																												<select class="custom-select" id="search-period_method">
																																<option value="all"         {% if GET_params.period_method == "all" or not GET_params.period_method  %}selected{% endif %}>See All</option>
																																<option value="year"        {% if GET_params.period_method == "year"        %}selected{% endif %}>Search by Year</option>
																																<option value="fiscal_year" {% if GET_params.period_method == "fiscal_year" %}selected{% endif %}>Search by Fiscal Year (年度検索)</option>
																												</select>																											
																												<input type="text" class="form-control" aria-label="Text input with checkbox" id="search-period_year"
																																{% if GET_params.period_year %}value="{{ GET_params.period_year }}"{% endif %} {% if GET_params.period_method == "all" or not GET_params.period_method %}disabled{% endif%}>
																								</div>
																				</div>
																				<div class="col-12">
																								<div class="btn-group btn-group-sm w-100" role="group" aria-label="Basic example">
																												<a href="#" class="btn btn{% if display_mode != 'tile' and display_mode %}-outline{% endif %}-primary search-link" mode="tile" >Tile View</a>																												
																												<a href="#" class="btn btn{% if display_mode != 'list'   %}-outline{% endif %}-primary search-link" mode="list" >List View</a>
																												<a href="#" class="btn btn{% if display_mode != 'table'  %}-outline{% endif %}-primary search-link" mode="table" >Table View</a>
																												<a href="#" class="btn btn{% if display_mode != 'bibtex' %}-outline{% endif %}-primary search-link" mode="bibtex" >Bibtex View</a>
																												<a href="#" class="btn btn{% if display_mode != 'latex'  %}-outline{% endif %}-primary search-link" mode="latex" >Latex View</a>																			

																								</div>
																				</div>																			
																</div>
												</form>
								</div>
								<div class="card-footer">
												<div style="text-align: right;color:#3C3C3C;font-size: 80%;">{{ GET_params.num_hits }} hits</div>								
								</div>
				</div>
</div>
